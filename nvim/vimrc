""" MAPPINGS
let mapleader = ' '
let maplocalleader = ','
nnoremap ; :

" Copy to system clipboard
noremap Y "+y

" Help
noremap <C-]> K
noremap <leader>h :vert help<space>

" Repeat search (`alt <` and `alt >`)
noremap ≤ ,
noremap ≥ ;

" Edit config
noremap <leader>rc <cmd>edit $MYVIMRC<cr>

" Sessions
noremap <leader>ss :mksession! .session.vim<cr>
noremap <leader>sr :source     .session.vim<cr>

" Navigation
noremap J 5j
noremap K 5k
noremap H ^
noremap L $

" Windows
noremap <C-h> <C-w>h
noremap <C-j> <C-w>j
noremap <C-k> <C-w>k
noremap <C-l> <C-w>l

" Buffers
noremap <s-left>  <cmd>bp<cr>
noremap <s-right> <cmd>bn<cr>
noremap <s-down>  <cmd>bd<cr>
noremap <s-up>    <cmd>b 1<cr>


""" OPTIONS
set foldlevel=2
set mouse=a
set noshowmode      " modes are shown in statusline
set spelllang=
set wildignorecase

set completeopt=menuone,noinsert,noselect
set shortmess+=I    " No intro message
set shortmess+=c    " No ins-completion-menu messages

set updatetime=500  " for CursorHold
set noswapfile      " living a dangerous life

set number
" set signcolumn=number  " don't use this when using gitsigns

set virtualedit=block

""" Conceal
set conceallevel=1   " conceal but leave spaces
" set concealcursor=n  " conceal in normal mode

""" Position
set colorcolumn=81
set cursorcolumn
set cursorline

""" Buffer management
set confirm               " ask to save stuff
set fileencoding=utf-8    " encoding written to file
set hidden                " hides buffers instead of closing them

""" Split windows
set splitbelow
set splitright

""" Search
set ignorecase
set smartcase

""" Whitespace
set list
set listchars=tab:\|-,trail:*,extends:>,precedes:<,nbsp:_,eol:~
set listchars+=space:· "not ASCII

""" Folds
set fillchars=fold:\  " no fillchars
set foldlevel=2
set foldtext=getline(v:foldstart).'\ …\ '.trim(getline(v:foldend))


""" Indentation
set expandtab      "<tab> inserts spaces
set smartindent
set shiftwidth=4
set softtabstop=4
set tabstop=4
augroup Indents    "some exceptions
    au!
    au FileType c,scheme,markdown,javascript setlocal shiftwidth=2 softtabstop=2 tabstop=2
augroup END

""" Scrolling
set nowrap
set scrolloff=5
set sidescrolloff=5

""" Persistent undo
set undofile
set undolevels=100     " How many undos
set undoreload=1000    " number of lines to save for undo

""" Compatibility
if has('nvim')
    set inccommand=nosplit
else
    syntax enable
    set autoindent
    set autoread
    set foldmethod=indent
    set hlsearch
    set incsearch
    set ruler
    set showcmd
    set undodir="$HOME/.local/share/nvim/undo"
    set wildmenu
endif

""" Netrw
let g:netrw_banner = 0        " no banner
let g:netrw_dirhistmax = 0    " no history
let g:netrw_liststyle = 3     " tree style listing

""" Disable bundled plugins
let g:loaded_2html_plugin = 1
let g:loaded_gzip = 1
let g:loaded_matchit = 1
let g:loaded_remote_plugins = 1
let g:loaded_spellfile_plugin = 1
let g:loaded_tarPlugin = 1
let g:loaded_tutor_mode_plugin = 1
let g:loaded_zipPlugin = 1
